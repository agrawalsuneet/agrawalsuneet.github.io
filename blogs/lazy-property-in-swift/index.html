<!DOCTYPE html>
<html lang="en">

<head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# website: http://ogp.me/ns/website#">

    
    <script>
        (function(w, d, s, l, i) {
            w[l] = w[l] || [];
            w[l].push({
                'gtm.start': new Date().getTime(),
                event: 'gtm.js'
            });
            var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s),
                dl = l != 'dataLayer' ? '&l=' + l : '';
            j.async = true;
            j.src =
                'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
            f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-WCXZ73G');
    </script>
    

    
    <script data-ad-client="ca-pub-1093303282603666" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">
    </script>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    

    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=6">

    <meta property="og:site_name" content="Suneet Agrawal">

    <meta name="robots" content="index,follow">
    <meta name="keywords" content="lazy,swift,lazy var,lazy property">


    
    <meta name="author" content="Suneet Agrawal">
    <meta name="owner" content="Suneet Agrawal">
    <meta name="google-site-verification" content="ossQ8_U15s60mLv7-z4koMhDohVCMlfnvv3Ifb88mdU">

    <meta name="title" content="Suneet Agrawal | lazy Property in Swift" />
    <meta property="og:title" content="lazy Property in Swift">
    <meta property="twitter:title" content="lazy Property in Swift">
    <meta name="twitter:site" content="@agrawalsuneet">

    <meta name="topic" content="lazy Property in Swift">
    <meta name="description" content="Object creation is a heavy process. When we create a class object, all the public and private properties of that class are initialised inside the constructor. Every variable inside a class initialisation requires a certain amount of time to allocate the memory on the heap and hold its reference on the stack.">
    <meta property="og:description" content="Object creation is a heavy process. When we create a class object, all the public and private properties of that class are initialised inside the constructor. Every variable inside a class initialisation requires a certain amount of time to allocate the memory on the heap and hold its reference on the stack.">
    <meta property="twitter:description" content="Object creation is a heavy process. When we create a class object, all the public and private properties of that class are initialised inside the constructor. Every variable inside a class initialisation requires a certain amount of time to allocate the memory on the heap and hold its reference on the stack.">
    <meta name="abstract" content="Object creation is a heavy process. When we create a class object, all the public and private properties of that class are initialised inside the constructor. Every variable inside a class initialisation requires a certain amount of time to allocate the memory on the heap and hold its reference on the stack.">
    <meta name="summary" content="Object creation is a heavy process. When we create a class object, all the public and private properties of that class are initialised inside the constructor. Every variable inside a class initialisation requires a certain amount of time to allocate the memory on the heap and hold its reference on the stack."> 
    <meta property="og:type" content="article">
    <meta property="article:published_time" content=" 2021-09-05 "> 

    <meta name="url" content="https://agrawalsuneet.github.io/blogs/lazy-property-in-swift/">
    <meta property="og:url" content="https://agrawalsuneet.github.io/blogs/lazy-property-in-swift/">
    <meta property="al:web:url" content="https://agrawalsuneet.github.io/blogs/lazy-property-in-swift/">

    <meta name="site_name" content="Suneet Agrawal">
    <meta property="og:site_name" content="Suneet Agrawal">

    <meta name="category" content="Portfolio">
    <meta name="email" content="agrawalsuneet@gmail.com">
    <meta name="og:email" content="agrawalsuneet@gmail.com">

    <meta name="twitter:creator" content="@agrawalsuneet">
    <link rel="canonical" href="https://agrawalsuneet.github.io/blogs/lazy-property-in-swift/">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="target" content="all" />
    <meta name="audience" content="all" />
    <meta name="coverage" content="Worldwide" />
    <meta name="distribution" content="Global">
    <meta name="rating" content="safe for kids" /> 
    <meta property="og:tags" content="Swift"> 
    <meta property="og:tags" content="iOS"> 
    <title>lazy Property in Swift &middot; Suneet Agrawal</title>

    
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> 

    <link rel="stylesheet" href="https://agrawalsuneet.github.io/css/style.css">
    <link rel="stylesheet" href="https://agrawalsuneet.github.io/css/custom.css">
    <link rel="stylesheet" href="https://agrawalsuneet.github.io/css/layout.css"> 
    <link href="https://agrawalsuneet.github.io/index.xml" rel="alternate" type="application/rss+xml" title="Suneet Agrawal" />  
    <link rel="icon" href="https://agrawalsuneet.github.io/suneet_icon.ico" /> 
</head>

<body>

    
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WCXZ73G" height="0" width="0"
      style="display:none;visibility:hidden"></iframe></noscript>
    

    
    <div id="fb-root"></div>
    <script>
        (function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s);
            js.id = id;
            js.src = "https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.0";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
    </script>
     <nav class="navbar navbar-default navbar-fixed-top visible-xs">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			
				<a class="navbar-brand" href="https://agrawalsuneet.github.io/">Suneet Agrawal</a>
			
		</div>
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav">
				
				
					<li><a href="https://agrawalsuneet.github.io/publications">Publications</a></li>
				
					<li><a href="https://agrawalsuneet.github.io/publicappearances">Public Appearances</a></li>
				
					<li><a href="https://agrawalsuneet.github.io/personalgamesandapps">Personal Games &amp; Apps</a></li>
				
					<li><a href="https://agrawalsuneet.github.io/opensourcecontribution">Open Source Contribution</a></li>
				
			</ul>
		</div>
	</div>
</nav>
<div class="container-fluid">
	<div class="row">
		<div id="menu" class="hidden-xs col-sm-4 col-md-3">
	<div id="menu-content" class="vertical-align">

		
			<a href="https://agrawalsuneet.github.io/">
				<img id="profile-pic" src="https://agrawalsuneet.github.io//img/suneet.jpg" alt="My Picture" class="img-circle center-block">
			</a>
		

		
			<h1 class="text-center" style="font-size:30px;">
				<a href="https://agrawalsuneet.github.io/">
					Suneet Agrawal
				</a>
		</h1>
		

		

		<div id="links" class="text-center" style="margin-top:50px; margin-bottom:50px; font-size:24px; color:#ffffff">
			
			
				<a href="https://agrawalsuneet.github.io/publications">
						Publications
				</a>
				</br>
			
				<a href="https://agrawalsuneet.github.io/publicappearances">
						Public Appearances
				</a>
				</br>
			
				<a href="https://agrawalsuneet.github.io/personalgamesandapps">
						Personal Games &amp; Apps
				</a>
				</br>
			
				<a href="https://agrawalsuneet.github.io/opensourcecontribution">
						Open Source Contribution
				</a>
				</br>
			
		</div>

		<div id="social" class="text-center">
			
				<a href="https://github.com/agrawalsuneet"><i class="fa fa-github fa-2x"></i></a>
			
				<a href="https://www.linkedin.com/in/agrawalsuneet/"><i class="fa fa-linkedin fa-2x"></i></a>
			
				<a href="https://medium.com/@agrawalsuneet"><i class="fa fa-medium fa-2x"></i></a>
			
				<a href="https://www.instagram.com/agrawalsuneet/"><i class="fa fa-instagram fa-2x"></i></a>
			
				<a href="https://www.facebook.com/agrawalsuneet"><i class="fa fa-facebook fa-2x"></i></a>
			

			<a href="mailto:agrawalsuneet@gmail.com"><i class="fa fa-envelope-o fa-2x"></i></a>
		</div>



	</div>
</div>

		<div id="content" class="col-xs-12 col-sm-8 col-md-9">
			<div class="row">
				<div id="post" class="col-xs-12">
 
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-112616552-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<main>
    <header>
        <h1 class="mx16">lazy Property in Swift</h1>
    </header>

    <div class="col-xs-12 vertical-centre">
        
        <small class="text-muted">
			
			
				<a href="https://agrawalsuneet.github.io/tags/swift"><span class="label label-success">Swift</span></a>
			
				<a href="https://agrawalsuneet.github.io/tags/ios"><span class="label label-success">iOS</span></a>
			
		</small> 

        

    </div>

    <article>
        <div class="col-xs-12">
            </br>
<div class="row">
<div class="col-lg-10">
<div class="center-justified text-content">
        Object creation is a heavy process. When we create a class object, all the public and private properties of that class are initialised inside the constructor. Every variable inside a class initialisation requires a certain amount of time to allocate the memory on the heap and hold its reference on the stack. The more variables, the more time it may take but since the time is in microseconds or even less, it's not observable.
        </br>
        </br>
        Sometimes we don't need all the objects to be initialised during the class object creation itself.
        </br>
        There can be two reasons for that.
        <ol>
                <li>That object/property/variable is dependent on another object to initialise first and use its reference.</li>
                <li>The flow is such that we need that object only in a certain condition.</li>
        </ol>
</div>
<div class="col-xs-12 googleads">
    
    <ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1093303282603666"
     data-ad-slot="5254968909"
     data-ad-format="horizontal"
     data-full-width-responsive="true"></ins>
     
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>
<div class="center-justified text-content">
        In Swift, we have certain features which can help us in delaying that object initialisation as per the requirement.
        </br>
        </br>
        One way of doing that is using lazy initialization. 
        </br>
        Lazy initialisation is also denoted as <mark>lazy var</mark> in Swift.
        </br>
        </br>
        lazy initialisation is a delegation of object creation when the first time that object will be called. The reference will be created but the object will not be created. The object will only be created when the first time that object will be accessed and every next time the same reference will be used.
        </br>
        </br>
        The basic initialisation of lazy property in a <mark>User</mark> struct object by using lazy will look like below
</div>
<pre class="zeropadding">
  <br/>struct User {<br/>    let name : String<br/>    let age : Int<br/>}<br/><br/>struct Department {<br/>    var users : [User]<br/>    <br/>    init(users : [User]) {<br/>        print("Department constructor is called")<br/>        self.users = users<br/>    }<br/>    <br/>    <b>lazy</b> var youngestUser : User? = {<br/>        print("Department youngestUser is computed")<br/>        return self.users.min(by: {$0.age < $1.age})<br/>    }()<br/>}<br/>
</pre>

<div class="col-xs-12 googleads">
    
    <ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1093303282603666"
     data-ad-slot="5254968909"
     data-ad-format="horizontal"
     data-full-width-responsive="true"></ins>
     
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>
<h3>
Let's try to understand what exactly lazy is
</h3>
</br>
<div class="center-justified text-content">
        Lazy initialisation is a delegation of property initialisation that will only be called when that property will be used the first time.
        </br>
        Even if we initialise the <mark>struct</mark> or <mark>class</mark> object, the lazy property will not be set.
        </br>
        </br>
        Lets see this with an example.
</div>
<pre class="zeropadding">
  <br/>struct User {<br/>    let name : String<br/>    let age : Int<br/>}<br/><br/>struct Department {<br/>    var users : [User]<br/>    <br/>    init(users : [User]) {<br/>        print("Department constructor is called")<br/>        self.users = users<br/>    }<br/>    <br/>    <b>lazy</b> var youngestUser : User? = {<br/>        print("Department youngestUser is computed")<br/>        return self.users.min(by: {$0.age < $1.age})<br/>    }()<br/>}<br/><br/>var engineeringDepartment = Department(users: [<br/>    User(name: "Suneet", age: 29),<br/>    User(name: "Ballu", age: 20),<br/>    User(name: "Agrawal", age: 50)<br/>])<br/><br/>//This will print: Department constructor is called<br/><br/>print(engineeringDepartment.youngestUser ?? "")<br/><br/>//This will print: Department youngestUser is computed<br/>//followed by : User(name: "Ballu", age: 20)<br/>
</pre>

<div class="center-justified text-content">
        As we can see the lazy property was not initialised even when we initialised the <mark>Department</mark> struct object. That only got initialised when we called the lazy property for the first time.
</div>
<div class="col-xs-12 googleads">
    
    <ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1093303282603666"
     data-ad-slot="5254968909"
     data-ad-format="horizontal"
     data-full-width-responsive="true"></ins>
     
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>
<h4>
Things to keep in mind while working with lazy property
</h4>
<h3>
Can only be used with var
</h3>
<div class="center-justified text-content">
        lazy can only be used with <mark>var</mark> but it can't be used with a <mark>let</mark> (immutable) property.
</div>
<pre class="zeropadding">
  <br/>struct Department {<br/>   //...<br/>    <br/>    <b>lazy</b> let youngestUser : User? = {    <e>//'lazy' cannot be used on a let</e><br/>        return self.users.min(by: {$0.age < $1.age})<br/>    }()<br/>}<br/>
</pre>

</br>
<h3>
Can be of primitive or non-primitive type
</h3>
<div class="center-justified text-content">
        A lazy property can be of primitive or non-primitive type. 
</div>
<pre class="zeropadding">
  <br/>struct Department {<br/>    //...<br/>    <br/>    <b>lazy</b> var youngestUserAge : Int? = {<br/>        return self.users.min(by: {$0.age < $1.age})?.age<br/>    }()<br/>    <br/>    <b>lazy</b> var youngestUser : User? = {<br/>        return self.users.min(by: {$0.age < $1.age})<br/>    }()<br/>}<br/>
</pre>

<div class="col-xs-12 googleads">
    
    <ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1093303282603666"
     data-ad-slot="5254968909"
     data-ad-format="horizontal"
     data-full-width-responsive="true"></ins>
     
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>
<h3>
Can only be used inside a class or struct
</h3>
<div class="center-justified text-content">
        Lazy can only be used inside a <mark>class</mark> or <mark>struct</mark>. We can't define it in a function or at the root level of a playground file.
</div>
<pre class="zeropadding">
  <br/><b>lazy</b> var youngestUser : Int = {  <e>//Lazy is only valid for members of a struct or class</e><br/>   return 1<br/>}()<br/>
</pre>

</br>
<h3>
The struct or class object accessing lazy property should also be var
</h3>
<div class="center-justified text-content">
        The object which is trying to access the lazy property should also be mutable means <mark>var</mark>.
</div>
<pre class="zeropadding">
  <br/>struct Department {<br/>   //...<br/>    <br/>    <b>lazy</b> var youngestUser : User? = {<br/>        print("Department youngestUser is computed")<br/>        return self.users.min(by: {$0.age < $1.age})<br/>    }()<br/>}<br/><br/>let engineeringDepartment = Department(users: [<br/>    User(name: "Suneet", age: 29),<br/>    User(name: "Ballu", age: 20),<br/>    User(name: "Agrawal", age: 50)<br/>])<br/><br/>print(engineeringDepartment.youngestUser ?? "") <br/><e>//Cannot use mutating getter on immutable value: 'engineeringDepartment' is a 'let' constant</e><br/>
</pre>

<div class="center-justified text-content">
        Please note that it's not compulsory to create all the objects of that <mark>class</mark> or <mark>struct</mark> should be <mark>var</mark> but in order to access the lazy property, the variable should be <mark>var</mark> (mutable) type.
</div>
<div class="col-xs-12 googleads">
    
    <ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1093303282603666"
     data-ad-slot="5254968909"
     data-ad-format="horizontal"
     data-full-width-responsive="true"></ins>
     
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>
<h3>
Once the value is computed, it will not change until the constructor is called again
</h3>
<div class="center-justified text-content">
        The computation of the lazy property will only happen once. Later the same values will be returned without computation.
</div>
<pre class="zeropadding">
  <br/>var engineeringDepartment = Department(users: [<br/>    User(name: "Suneet", age: 29),<br/>    User(name: "Ballu", age: 20),<br/>    User(name: "Agrawal", age: 50)<br/>])<br/><br/>print(engineeringDepartment.youngestUser ?? "")<br/>//This will print: User(name: "Ballu", age: 20)<br/><br/>engineeringDepartment.users.append(User(name: "John", age: 18))<br/>//or<br/>engineeringDepartment.users = [User(name: "John", age: 18)]<br/><br/>print(engineeringDepartment.youngestUser ?? "")<br/>//This will still print: User(name: "Ballu", age: 20)<br/>
</pre>

<div class="center-justified text-content">
        As we can see, even if changed values in the <mark>users</mark> array or even initialised the array again, the lazy property is still holding the last values.
        </br>
        The lazy property will only be computed again when the <mark>Department</mark> constructor will be called on same object else the lazy property will hold the same values.
</div>
</br>
</br>
<h3>
Few things to remember about lazy property
</h3>
<div class="center-justified text-content">
        A lazy property is used to delay the initialisation of property and it will be initialised only when the first time that property will be called but it will only be called once. Later it will return the same values.
        </br>
        Also, it can only be used inside a <mark>class</mark> or <mark>struct</mark> and the calling object should also be <mark>var</mark>.
</div>
<div class="col-xs-12 googleads">
    
    <ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1093303282603666"
     data-ad-slot="5254968909"
     data-ad-format="horizontal"
     data-full-width-responsive="true"></ins>
     
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>
</div>
<div class="col-lg-2 position-sticky-top">
<div class="googleads">
    
    <ins class="adsbygoogle"
        style="display:block"
        data-ad-client="ca-pub-1093303282603666"
        data-ad-slot="5801291010"
        data-ad-format="vertical"
        data-full-width-responsive="true"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>
</div>
</div>
<div class="col-xs-12 center-justified text-subtitle">
    <div class="col-sm-6 col-xs-12">
        <a href="/blogs/">
        &lt;&lt; All Blogs
      </a>
    </div>
    <div class="col-sm-6 col-xs-12 text-right">
        <a href="/blogs/computed-property-in-swift/">
        Computed property in Swift &gt;&gt;
      </a>
    </div>
</div>

        </div>
    </article>
</main>

<script data-name="BMC-Widget" 
        data-cfasync="false" 
        src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" 
        data-id="agrawalsuneet" 
        data-description="Support me on Buy me a coffee!" 
        data-message="If you find this blog helpful, support us to keep this website up and free !!!" 
        data-color="#ff813f" 
        data-position="Right" 
        data-x_margin="18" 
        data-y_margin="18"></script>

 
<div id="disqus_thread">
    <div id="disqus_empty"></div>
</div>

<script type="text/javascript" defer>

    function onContentScrolled(e) {
        var currentScroll = document.scrollingElement.scrollTop;
        var disqus_target = document.getElementById('disqus_thread');

        if (disqus_target && (currentScroll > disqus_target.getBoundingClientRect().top - 150)) {
            load_disqus();
            console.log('Disqus comments loaded');
        }
    }

    function load_disqus() {
        if (window.location.hostname == "localhost") {
            var content = document.getElementById("content");
            content.removeEventListener('scroll', onContentScrolled, false)
            return;
        }

        
        var is_disqus_empty = document.getElementById('disqus_empty'),
            disqus_target = document.getElementById('disqus_thread'),
            disqus_embed = document.createElement('script'),
            disqus_hook = (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]);

        var disqus_shortname = 'agrawalsuneet';

        
        if (disqus_target && is_disqus_empty) {
            disqus_embed.type = 'text/javascript';
            disqus_embed.async = true;
            disqus_embed.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            disqus_hook.appendChild(disqus_embed);
            is_disqus_empty.remove();
        }

        var content = document.getElementById("content");
        content.removeEventListener('scroll', onContentScrolled, false)

        
        let remove_ads = setInterval(() => {
            console.log('Checking for Disqus Ads');

            let iframes = document.getElementsByTagName('iframe');

            for (var iframe in iframes) {
                
                
                

                
                
                
                
                

                if (iframes[iframe].id.includes("dsq") 
                && iframes[iframe].name.includes("dsq") 
                && !iframes[iframe].src.includes("disqus.com/embed/comments")) {
                    iframes[iframe].style.display = 'none';
                    clearInterval(remove_ads);
                    console.log('Disqus Ads removed');
                }
            }
        }, 1000);

        setTimeout(function () {
            clearInterval(remove_ads);
        }, 5000);
    }

    (function () {
        var content = document.getElementById("content");
        content.addEventListener('scroll', onContentScrolled, false);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by
        Disqus.</a></noscript>


						</div>
					</div>
				</div>
			</div>
		</div>
  </div>


  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'code-here', 'auto');
    ga('send', 'pageview');
    window.baseURL = "https:\/\/agrawalsuneet.github.io\/";
  </script>
  


  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.2/js/bootstrap.min.js"></script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/topojson/1.6.9/topojson.min.js"></script>
  
  
  <script src="https://agrawalsuneet.github.io//js/App.js"></script>
  
</body>
</html>